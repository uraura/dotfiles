#!/bin/bash

pushd $HOME/.dotfiles
diff <(git status --short) /dev/null > /dev/null
[ $? == 0 ] && exit 0

emojis=("ğŸ˜€" "ğŸ˜ƒ" "ğŸ˜„" "ğŸ˜" "ğŸ˜†" "ğŸ˜…" "ğŸ˜‚" "ğŸ¤£" "â˜ºï¸" "ğŸ˜Š" "ğŸ˜‡" "ğŸ™‚" "ğŸ™ƒ" "ğŸ˜‰" "ğŸ˜Œ" "ğŸ˜" "ğŸ˜˜" "ğŸ˜—" "ğŸ˜™" "ğŸ˜š" "ğŸ˜‹" "ğŸ˜œ" "ğŸ˜" "ğŸ˜›" "ğŸ¤‘" "ğŸ¤—" "ğŸ¤“" "ğŸ˜" "ğŸ¤¡" "ğŸ¤ " "ğŸ˜" "ğŸ˜’" "ğŸ˜" "ğŸ˜”" "ğŸ˜Ÿ" "ğŸ˜•" "ğŸ™" "â˜¹ï¸" "ğŸ˜£" "ğŸ˜–" "ğŸ˜«" "ğŸ˜©" "ğŸ˜¤" "ğŸ˜ " "ğŸ˜¡" "ğŸ˜¶" "ğŸ˜" "ğŸ˜‘" "ğŸ˜¯" "ğŸ˜¦" "ğŸ˜§" "ğŸ˜®" "ğŸ˜²" "ğŸ˜µ" "ğŸ˜³" "ğŸ˜±" "ğŸ˜¨" "ğŸ˜°" "ğŸ˜¢" "ğŸ˜¥" "ğŸ¤¤" "ğŸ˜­" "ğŸ˜“" "ğŸ˜ª" "ğŸ˜´" "ğŸ™„" "ğŸ¤”" "ğŸ¤¥" "ğŸ˜¬" "ğŸ¤" "ğŸ¤¢" "ğŸ¤§" "ğŸ˜·" "ğŸ¤’" "ğŸ¤•" "ğŸ˜ˆ" "ğŸ‘¿" "ğŸ‘¹" "ğŸ‘º" "ğŸ’©" "ğŸ‘»" "ğŸ’€" "â˜ ï¸" "ğŸ‘½" "ğŸ‘¾" "ğŸ¤–" "ğŸƒ" "ğŸ˜º" "ğŸ˜¸" "ğŸ˜¹" "ğŸ˜»" "ğŸ˜¼" "ğŸ˜½" "ğŸ™€" "ğŸ˜¿" "ğŸ˜¾")

emoji=${emojis[$((RANDOM%${#emojis[*]}))]}

notify() {
  osascript -e 'display notification "failed to save dotfiles." with title "ğŸ†˜ "'
  exit 1
}

trap 'notify' ERR
git add --all
git commit --all --message "$emoji"
git push origin master
osascript -e "display notification \"dotfiles saved!\" with title \"$emoji\""
